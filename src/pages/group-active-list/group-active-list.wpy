<template>
  <view class="group-active-list-box">
    <view class="g-a-l-nav" @tap="chooseStatus">
      <view class="g-a-l-n-item {{upStatus}}" id="1">已经上</view>
      <view class="g-a-l-n-item {{downStatus}}" id="2">已过期/已下线</view>
    </view>
    <view class="g-a-l-article" hidden="{{!upStatus}}">
      <view class="g-a-l-a-item">
        <view class="component-group-item">
          <view class="up">
            <view class="up-box">
              <view class="u-pic">
                <image class="u-p-image" wx:if="{{imageUrlHead}}" src="{{imageUrlHead + '/defaults/b-image/mine/pic-popup@2x.png'}}"></image>
                <view class="u-p-people">2人团</view>
              </view>
              <view class="u-title">尊宝披萨周年庆套餐</view>
              <view class="u-price">现价 ¥100</view>
              <view class="u-hot-price">团购价
                <text class="u-hot-price-em">¥80</text>
              </view>
            </view>
          </view>
          <view class="down">
            <view class="down-box">
              <view class="d-status">已过期</view>
              <view class="d-on-off d-btn">上线</view>
              <view class="d-delete d-btn">删除</view>
              <view class="d-editor d-btn">编辑</view>
            </view>
          </view>
        </view>
      </view>
    </view>
    <view class="g-a-l-article" hidden="{{!downStatus}}">offline</view>
    <view class="g-a-l-submit">新建</view>
  </view>
</template>

<script>
  import wepy from 'wepy'
  import base from '@/common/mixins/base'
  import URIS from 'common/js/config'

  const UP = '1'
  const DOWN = '2'

  export default class GAList extends wepy.page {
    mixins = [base]

    data = {
      imageUrlHead: URIS.image,
      status: '1'
    }

    onLoad() {

    }

    onShow() {
      console.log(this.status, UP, this.status === UP, this.status === DOWN)
    }

    methods = {
      chooseStatus(e) {
        let id = e.target.id
        if (id !== UP && id !== DOWN) {
          return
        }
        this.status = id
        this.$apply()
      }
    }
    computed = {
      upStatus() {
        return this.status === UP ? 'active' : ''
      },
      downStatus() {
        return this.status === DOWN ? 'active' : ''
      }
    }
  }
</script>

<style lang='stylus'>
  @import "../../common/stylus/mixin.styl"
  @import "../../common/stylus/variable.styl"

  .group-active-list-box
    position: relative
    min-height: 100vh
    background-color: $color-background
    .g-a-l-nav
      layout(row)
      justify-content: space-around
      align-items: center
      height: 42.5px
      font-family: $font-family-light
      font-size: $font-size-medium
      color: $color-text
      border: 0.5px solid $color-split-line
      border-right: none
      border-left: none
      .g-a-l-n-item
        padding: 0 8px
        height: 100%
        line-height: 42.5px
        transition: 0.3 all
        color: $color-text
        border-bottom-line($color-assist-f, 0, 0)
      .active
        color: $color-assist-f
        border-bottom-line($color-assist-f, 100%, 2px)
    .g-a-l-article
      height: 50vh
      .g-a-l-a-item
        padding: 10px 12px
        .component-group-item
          background-color: $color-white
          position: relative
          padding-bottom: 31.34%
          height: 0
          border-radius: 2px
          border: .5px solid $color-row-line
          .up
            position: absolute
            top: 0
            left: 0
            right: 0
            height: 0
            padding-bottom: 19.945%
            .up-box
              layout()
              justify-content: space-around
              position: absolute
              top: 0
              right: 0
              left: 0
              bottom: 0
              padding: 8px 0px 12px
              margin: 0 10px
              overflow: hidden
              border-bottom: .5px dotted $color-row-line
              .u-pic
                position: relative
                height: 100%
                width: 27.195%
                overflow: hidden
                border-radius: 2px
                margin-right: 10px
                .u-p-image
                  width: 100%
                  height: 100%
                .u-p-people
                  position: absolute
                  padding-left: 7.5px
                  bottom: 0
                  border-radius: 2px
                  line-height: 17px
                  height: 17px
                  width: 100%
                  opacity: .6
                  background-color: #000
                  font-family: $font-family-light
                  font-size: $font-size-small-s
                  color: $color-white
              .u-title
                no-wrap()
                font-family: $font-family-regular
                font-size: $font-size-medium
                color: $color-text-dark
                width: 70%
              .u-price
                font-family: $font-family-light
                font-size: $font-size-small-s
                color: $color-text-light
              .u-hot-price
                font-family: $font-family-light
                font-size: $font-size-small-s
                color: $color-text-light
                .u-hot-price-em
                  font-family: $font-family-meddle
                  font-size: $font-size-small
                  color: #2D2B2F

          .down
            position: absolute
            bottom: 0
            left: 0
            right: 0
            height: 0
            padding-bottom: 11.465%
            .down-box
              layout(row)
              align-items: center
              position: absolute
              top: 0
              right: 0
              left: 0
              bottom: 0
              margin: 0 10px
              overflow: hidden
              .d-status
                margin-left: 2px
                ont-family: $font-family-light
                font-size: $font-size-medium
                color: $color-text-td
                flex: 1
              .d-btn
                layout()
                justify-content: center
                align-items: center
                box-sizing: border-box
                margin-left: 5px
                width: 60px
                height: 24px
                border: .5px solid $color-row-line
                border-radius: 2px
                font-family: $font-family-light
                font-size: $font-size-small-s
                color: $color-text
              .d-editor
                color: $color-assist-f
                border-color: $color-assist-f
                margin-right: 5px

    .g-a-l-submit
      position: fixed
      left: 0
      right: 0
      bottom: 17.5px
      margin: 0 12px
      padding: 5.87%
      height: 0
      background: $color-theme
      border-radius: 4px
      line-height: 0
      text-align: center;
      font-family: $font-family-regular
      font-size: $font-size-medium
      color: $color-white
      letter-spacing: 1.02px
</style>
